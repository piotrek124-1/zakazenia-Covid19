<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dane powiatowe</title>
    <script src="plotly/plotly-latest.min.js"></script>
    <link rel="stylesheet" href="bootstrap-4.0.0/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="bootstrap-4.0.0/js/bootstrap.bundle.min.js"></script>
</head>
<body>
<nav class="navbar navbar-expand-lg bg-light">
    <div class="container-fluid navbar-collapse">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" href="index.html" style="color: cornflowerblue">Strona główna</a>
            </li>
            <li class="dropdown">
                <a href="#" class="nav-link dropdown-toggle active" role="button" data-toggle="dropdown" style="color: white;background-color: cornflowerblue">Dane powiatowe</a>
                <div class="dropdown-menu">
                    <a href="powiatoweWykres.html" class="dropdown-item">Wykres</a>
                    <a href="powiatoweSrednia.html" class="dropdown-item">Wykres z średnią 7 dniową</a>
                    <a href="powiatoweProcent.html" class="dropdown-item">% pozytywnych wyników</a>
                    <a href="powiatoweKwarantanna.html" class="dropdown-item active">Liczba osób objętych kwarantanną</a>
                </div>
            </li>
            <li class="dropdown">
                <a href="#" class="nav-link dropdown-toggle" role="button" data-toggle="dropdown" style="color: cornflowerblue">Dane wojewódzkie</a>
                <div class="dropdown-menu">
                    <a href="wojewodzkieWykres.html" class="dropdown-item">Wykres</a>
                    <a href="wojewodzkieSrednia.html" class="dropdown-item">Wykres z średnią 7 dniową</a>
                    <a href="wojewodzkieProcent.html" class="dropdown-item">% pozytywnych wyników</a>
                    <a href="wojewodzkieKwarantanna.html" class="dropdown-item">Liczba osób objętych kwarantanną</a>
                </div>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="ogolnopolskie.html" style="color: cornflowerblue">Dane ogólnopolskie</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="kontakt.html" style="color: cornflowerblue">Kontakt</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="gitHub.html" style="color: cornflowerblue">GitHub</a>
            </li>
        </ul>
    </div>
</nav>
<div id="powiat">
    <label for="powiatSelect">
    </label>
    Powiat/Miasto
    <input multiple type="text" id = "powiatSelect" list="powiatList">
    <label for="powiatSelect2"></label><input multiple type="text" id = "powiatSelect2" list="powiatList">
    <label for="powiatSelect3"></label><input multiple type="text" id = "powiatSelect3" list="powiatList">
    <datalist id = "powiatList"></datalist>
    <script>
        var data = ["Cały kraj","aleksandrowski","augustowski","bartoszycki","bełchatowski","będziński","bialski","Biała Podlaska","białobrzeski","białogardzki","białostocki","Białystok","bielski","Bielsko-Biała","bieruńsko-lędziński","bieszczadzki","biłgorajski","bocheński","bolesławiecki","braniewski","brodnicki","brzeski","brzeziński","brzozowski","buski","bydgoski","Bydgoszcz","Bytom","bytowski","Chełm","chełmiński","chełmski","chodzieski","chojnicki","Chorzów","choszczeński","chrzanowski","ciechanowski","cieszyński","czarnkowsko-trzcianecki","Częstochowa","częstochowski","człuchowski","Dąbrowa Górnicza","dąbrowski","dębicki","drawski","działdowski","dzierżoniowski","Elbląg","elbląski","ełcki","garwoliński","Gdańsk","gdański","Gdynia","giżycki","Gliwice","gliwicki","głogowski","głubczycki","gnieźnieński","goleniowski","golubsko-dobrzyński","gołdapski","gorlicki","gorzowski","Gorzów Wielkopolski","gostyniński","gostyński","górowski","grajewski","grodziski","grójecki","Grudziądz","grudziądzki","gryficki","gryfiński","hajnowski","hrubieszowski","iławski","inowrocławski","janowski","jarociński","jarosławski","jasielski","Jastrzębie-Zdrój","jaworski","Jaworzno","Jelenia Góra","jeleniogórski","jędrzejowski","kaliski","Kalisz","kamiennogórski","kamieński","kartuski","Katowice","kazimierski","kędzierzyńsko-kozielski","kępiński","kętrzyński","Kielce","kielecki","kluczborski","kłobucki","kłodzki","kolbuszowski","kolneński","kolski","kołobrzeski","konecki","Konin","koniński","Koszalin","koszaliński","kościański","kościerski","kozienicki","krakowski","Kraków","krapkowicki","krasnostawski","kraśnicki","Krosno","krośnieński","krotoszyński","kutnowski","kwidzyński","legionowski","Legnica","legnicki","leski","leszczyński","Leszno","leżajski","lęborski","lidzbarski","limanowski","lipnowski","lipski","lubaczowski","lubański","lubartowski","lubelski","lubiński","Lublin","lubliniecki","lwówecki","łańcucki","łaski","łęczycki","łęczyński","łobeski","Łomża","łomżyński","łosicki","łowicki","łódzki wschodni","Łódź","łukowski","makowski","malborski","miechowski","mielecki","międzychodzki","międzyrzecki","mikołowski","milicki","miński","mławski","mogileński","moniecki","mrągowski","Mysłowice","myszkowski","myślenicki","myśliborski","nakielski","namysłowski","nidzicki","niżański","nowodworski","nowomiejski","nowosądecki","nowosolski","nowotarski","nowotomyski","Nowy Sącz","nyski","obornicki","olecki","oleski","oleśnicki","olkuski","Olsztyn","olsztyński","oławski","opatowski","opoczyński","Opole","opolski","ostrołęcki","Ostrołęka","ostrowiecki","ostrowski","ostródzki","ostrzeszowski","oświęcimski","otwocki","pabianicki","pajęczański","parczewski","piaseczyński","Piekary Śląskie","pilski","pińczowski","piotrkowski","Piotrków Trybunalski","piski","pleszewski","Płock","płocki","płoński","poddębicki","policki","polkowicki","Poznań","poznański","proszowicki","prudnicki","pruszkowski","przasnyski","przemyski","Przemyśl","przeworski","przysuski","pszczyński","pucki","puławski","pułtuski","pyrzycki","raciborski","Radom","radomski","radomszczański","radziejowski","radzyński","rawicki","rawski","ropczycko-sędziszowski","Ruda Śląska","rybnicki","Rybnik","rycki","rypiński","rzeszowski","Rzeszów","sandomierski","sanocki","sejneński","sępoleński","Siedlce","siedlecki","Siemianowice Śląskie","siemiatycki","sieradzki","sierpecki","skarżyski","Skierniewice","skierniewicki","sławieński","słubicki","słupecki","Słupsk","słupski","sochaczewski","sokołowski","sokólski","Sopot","Sosnowiec","stalowowolski","starachowicki","stargardzki","starogardzki","staszowski","strzelecki","strzelecko-drezdenecki","strzeliński","strzyżowski","sulęciński","suski","suwalski","Suwałki","szamotulski","Szczecin","szczecinecki","szczycieński","sztumski","szydłowiecki","średzki","śremski","świdnicki","świdwiński","świebodziński","świecki","Świętochłowice","Świnoujście","Tarnobrzeg","tarnobrzeski","tarnogórski","tarnowski","Tarnów","tatrzański","tczewski","tomaszowski","Toruń","toruński","trzebnicki","tucholski","turecki","Tychy","wadowicki","Wałbrzych","wałbrzyski","wałecki","Warszawa","warszawski zachodni","wąbrzeski","wągrowiecki","wejherowski","węgorzewski","węgrowski","wielicki","wieluński","wieruszowski","Włocławek","włocławski","włodawski","włoszczowski","wodzisławski","wolsztyński","wołomiński","wołowski","Wrocław","wrocławski","wrzesiński","wschowski","wysokomazowiecki","wyszkowski","Zabrze","zambrowski","zamojski","Zamość","zawierciański","ząbkowicki","zduńskowolski","zgierski","zgorzelecki","Zielona Góra","zielonogórski","złotoryjski","złotowski","zwoleński","żagański","żarski","żniński","Żory","żuromiński","żyrardowski","żywiecki"]
        var newPowiat = document.getElementById("powiatList")
        for (i in data) {
            newPowiat = document.getElementById("powiatList").appendChild(document.createElement("option"))
            newPowiat.value = data[i]
        }
        newPowiat = document.getElementById("powiatSelect")
        newPowiat.addEventListener("input", plot)
        document.getElementById("powiatSelect2").addEventListener("input", plot)
        document.getElementById("powiatSelect3").addEventListener("input", plot)
        var csv = false
        var plotCsvData = []
        if (csv === false) {
            csvData = Plotly.d3.csv("https://raw.githubusercontent.com/piotrek124-1/zakazenia-Covid19/main/plotData/powiaty_kompletne.csv", function (error, data) {
                plotCsvData = data
                csv = true
            })
        }
        var osobyNaKwarantannie = [], stan_rekordu_na = [], powiatName
        function plot() {
            function activePowiat(powiat) {
                osobyNaKwarantannie = []
                stan_rekordu_na = []
                for (i in plotCsvData) {
                    if (plotCsvData[i]["powiat_miasto"] === powiat) {
                        osobyNaKwarantannie.push(plotCsvData[i]["liczba_osob_objetych_kwarantanna"])
                        stan_rekordu_na.push(plotCsvData[i]["stan_rekordu_na"])
                    }
                }
                powiatName = powiat
            }
            activePowiat(document.getElementById("powiatSelect").value)
            var trace = {
                x: stan_rekordu_na,
                y: osobyNaKwarantannie,
                mode: "lines",
                name: powiatName
            }
            activePowiat(document.getElementById("powiatSelect2").value)
            var trace2 = {
                x: stan_rekordu_na,
                y: osobyNaKwarantannie,
                mode: "lines",
                name: powiatName
            }
            activePowiat(document.getElementById("powiatSelect3").value)
            var trace3 = {
                x: stan_rekordu_na,
                y: osobyNaKwarantannie,
                mode: "lines",
                name: powiatName
            }
            var tick = trace.x
            if (trace.x.length === 0) {
                if (trace2.x.length === 0) {
                    tick = trace3.x
                } else {
                    tick = trace2.x
                }
            }
            var layout = {
                title: "Wykres liczby osób objętych kwarantanną",
                xaxis: {
                    title: "data",
                    tickvals: tick,
                    tickformat: "%d/%m"
                }, yaxis: {
                    title: "Liczba osób objętych kwarantanną"
                }, updatemenus: [{
                    buttons: [{
                        args: ["type", "scatter"],
                        label: "liniowy",
                        method: "restyle",
                    },
                        {
                            args: ["type", "bar"],
                            label: "słupkowy",
                            method: "restyle"
                        }], x: 1, y: 1.25, yanchor: "top"
                }, {
                    buttons: [{
                        args: ["fill", "none"],
                        label: "wypełnienie",
                        method: "restyle",
                        args2: ["fill", "tozeroy"]
                    }], x: 0.94, y: 1.25, yanchor: "top", type: "buttons"
                }]
            }
            var plotData = [trace, trace2, trace3]
            Plotly.newPlot("plot", plotData, layout)
        }
    </script>
</div>
<div id="plot"></div>
<div>
    Źródło danych:
    <a href= "https://gov.pl/">https://gov.pl/</a>
</div>
</body>
</html>